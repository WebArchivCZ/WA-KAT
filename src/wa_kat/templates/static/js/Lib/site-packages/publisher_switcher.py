#! /usr/bin/env python
# -*- coding: utf-8 -*-
#
# Interpreter version: python 2.7
#
# Imports =====================================================================
from browser import document

from descriptors import StandardElDescriptor


# Variables ===================================================================
PUBLISHER_EL = document["whole_publisher"]
SWITCHER_EL = document["publisher_switcher"]


# Functions & classes =========================================================
def show_publisher(ev=None):
    PUBLISHER_EL.style.display = "block"
    SWITCHER_EL.bind("change", hide_publisher)


def hide_publisher(ev=None):
    PUBLISHER_EL.style.display = "none"
    SWITCHER_EL.bind("change", show_publisher)


SWITCHER_EL.bind("change", show_publisher)
SWITCHER_EL.checked = False
hide_publisher()


class PublisherDescriptor(StandardElDescriptor):
    def __init__(self):
        super(self.__class__, self).__init__(document["publisher"])

    def __set__(self, *args, **kwargs):
        show_publisher()
        super(self.__class__, self).__set__(*args, **kwargs)

    def __get__(self, *args, **kwargs):
        if not SWITCHER_EL.checked:
            return None

        return super(self.__class__, self).__get__(*args, **kwargs)
